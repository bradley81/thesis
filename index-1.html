<!doctype html>
<html>
<head>
<meta charset="UTF-8">
	<title>嘉義街外-陳澄波</title>
	<link rel="stylesheet" href="CSS/normalize.css">
	<link rel="stylesheet" href="CSS/style.css">
	<!--<audio src="music1.mp3" autoplay loop></audio>-->
	<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
	<script src="outside of street.js"></script>
	<script>
		var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;
		function init() {
		canvas = document.getElementById("canvas");
		anim_container = document.getElementById("animation_container");
		dom_overlay_container = document.getElementById("dom_overlay_container");
		var comp=AdobeAn.getComposition("D28629E05FF24AB5A8DBA8A20E2863C0");
		var lib=comp.getLibrary();
		var loader = new createjs.LoadQueue(false);
		loader.addEventListener("fileload", function(evt){handleFileLoad(evt,comp)});
		loader.addEventListener("complete", function(evt){handleComplete(evt,comp)});
		var lib=comp.getLibrary();
		loader.loadManifest(lib.properties.manifest);
		}
		function handleFileLoad(evt, comp) {
		var images=comp.getImages();	
		if (evt && (evt.item.type == "image")) { images[evt.item.id] = evt.result; }	
		}
		function handleComplete(evt,comp) {
		//This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
		var lib=comp.getLibrary();
		var ss=comp.getSpriteSheet();
		var queue = evt.target;
		var ssMetadata = lib.ssMetadata;
		for(i=0; i<ssMetadata.length; i++) {
		ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
		}
		exportRoot = new lib.outsideofstreet();
		stage = new lib.Stage(canvas);	
		//Registers the "tick" event listener.
		fnStartAnimation = function() {
		stage.addChild(exportRoot);
		createjs.Ticker.setFPS(lib.properties.fps);
		createjs.Ticker.addEventListener("tick", stage);
		}	    
		//Code to support hidpi screens and responsive scaling.
		function makeResponsive(isResp, respDim, isScale, scaleType) {		
		var lastW, lastH, lastS=1;		
		window.addEventListener('resize', resizeCanvas);		
		resizeCanvas();		
		function resizeCanvas() {			
			var w = lib.properties.width, h = lib.properties.height;			
			var iw = window.innerWidth, ih=window.innerHeight;			
			var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
			if(isResp) {                
				if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
					sRatio = lastS;                
				}				
				else if(!isScale) {					
					if(iw<w || ih<h)						
						sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==1) {					
					sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==2) {					
					sRatio = Math.max(xRatio, yRatio);				
				}			
			}			
			canvas.width = w*pRatio*sRatio;			
			canvas.height = h*pRatio*sRatio;
			canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';				
			canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
			stage.scaleX = pRatio*sRatio;			
			stage.scaleY = pRatio*sRatio;			
			lastW = iw; lastH = ih; lastS = sRatio;            
			stage.tickOnUpdate = false;            
			stage.update();            
			stage.tickOnUpdate = true;		
		}
		}
		makeResponsive(false,'both',false,1);	
		AdobeAn.compositionLoaded(lib.properties.id);
		fnStartAnimation();
		}
	</script>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
</head>
<body onload="init();">
	<header class="site-header">
		<div class="subject">嘉義街外-陳澄波</div>
		<div class="subject-En">Outside Chiayi Street-Chen Cheng-po</div>
		<div class="hyper">
			<ul class="menu">
				<li><a href="index-1.html">首 頁</a></li>
				<li><a href="">人物介紹</a></li>
				<li><a href="">製作過程</a></li>
				<li><a href="">相關網站</a></li>
			</ul>
		</div>
	</header>
	<img class="handsome" src="images/帝展動態(黑線).gif" alt="charactor">
	<div class="site-main">
		<div id="animation_container">
		<canvas id="canvas">
		</canvas>	
		<div id="dom_overlay_container">
		</div>
		</div>
	</div>
	<script type="text/javascript">    //mouseMoaveAnimation效果
		var windowWidth = $(window).width();
		$('#animation_container').mousemove(function(event){
		var moveX = (($(window).width() / 3) - event.pageX)*0.1;
		var moveY = (($(window).height() / 2) - event.pageY)*0.6;
		$('#canvas').css('margin-left', moveX + 'px');
		$('#canvas').css('margin-top', moveY + 'px');
		});
	</script>
	<footer class="site-footer">
		<div class="copyright">
		Copyright@2018 Lin Yueh-feng, Graduate Institute of Human Resource and eLearning Technology, National Tsing Hua University / 網站版面最佳瀏覽解析度為1920*1080。
		<br>
		The best way to view our website is at 1920*1080 pixel screen resolution.
		</div>
	</footer>
	
</body>
</html>
